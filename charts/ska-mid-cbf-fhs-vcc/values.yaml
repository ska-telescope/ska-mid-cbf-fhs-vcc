# Default values for ska-mid-cbf HELM chart.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

display: ":0"
xauthority: "~/.Xauthority"

enabled: true

system: csp
subsystem: fhs-vcc
telescope: SKA-mid

labels:
  app: ska-mid-cbf-fhs-vcc

global:
  minikube: false
  exposeDatabaseDS: true
  exposeAllDS: false
  tango_host: databaseds-tango-base-test:10000
  dsconfig:
    image:
      registry: artefact.skao.int
      image: ska-tango-images-tango-dsconfig
      tag: 1.5.13
      pullPolicy: IfNotPresent

midcbf:
  image:
    registry: docker.io/library
    image: ska-mid-cbf-fhs-vcc
    tag: 0.0.1
    pullPolicy: IfNotPresent

resources:
  limits:
    cpu: 200m
    memory: 256Mi
    ephemeral-storage: 512Mi
  requests:
    cpu: 100m
    memory: 128Mi
    ephemeral-storage: 256Mi

simulationMode: 1
emulationMode: 0

emulatorIds:
  - "vcc-emulator-1"
  - "vcc-emulator-2"
  - "vcc-emulator-3"

emulatorIpBlockIds:
  mac200: "ethernet_200g"
  packetValidation: "packet_validation"
  widebandInputBuffer: "wideband_input_buffer"
  widebandFrequencyShifter: "wideband_frequency_shifter"
  b123Vcc: "b123vcc"
  frequencySliceSelection: "fs_selection_26_2_1"

instances:
  - name: fhs-vcc-1
    mac200:
      deviceId: "eth200g_0"
      simulationMode: "{{ .Values.simulationMode }}"
      emulationMode: "{{ .Values.emulationMode }}"
      emulatorId: "{{ index .Values.emulatorIds 0 }}"
    packetValidation:
      deviceId: "packet_validation_unimplemented"
      simulationMode: "{{ .Values.simulationMode }}"
      emulationMode: "{{ .Values.emulationMode }}"
      emulatorId: "{{ index .Values.emulatorIds 0 }}"
    widebandInputBuffer:
      deviceId: "wideband_input_buffer_unimplemented"
      simulationMode: "{{ .Values.simulationMode }}"
      emulationMode: "{{ .Values.emulationMode }}"
      emulatorId: "{{ index .Values.emulatorIds 0 }}"
    widebandFrequencyShifter:
      deviceId: "wideband_frequency_shifter_unimplemented"
      simulationMode: "{{ .Values.simulationMode }}"
      emulationMode: "{{ .Values.emulationMode }}"
      emulatorId: "{{ index .Values.emulatorIds 0 }}"
    b123VccOsppfbChanneliser:
      deviceId: "receptor0_band123_vcc"
      simulationMode: "{{ .Values.simulationMode }}"
      emulationMode: "{{ .Values.emulationMode }}"
      emulatorId: "{{ index .Values.emulatorIds 0 }}"
    frequencySliceSelection:
      deviceId: "receptor0_fs_selector" # or receptor0_pss_fs_select
      simulationMode: "{{ .Values.simulationMode }}"
      emulationMode: "{{ .Values.emulationMode }}"
      emulatorId: "{{ index .Values.emulatorIds 0 }}"
    vccAllBands:
      deviceId: "vcc_all_bands_unimplemented"
      simulationMode: "0"
      emulationMode: "1"
  - name: fhs-vcc-2
    mac200:
      deviceId: "eth200g_1" # which number should this be
      simulationMode: "{{ .Values.simulationMode }}"
      emulationMode: "{{ .Values.emulationMode }}"
      emulatorId: "{{ index .Values.emulatorIds 1 }}"
    packetValidation:
      deviceId: "packet_validation_unimplemented"
      simulationMode: "{{ .Values.simulationMode }}"
      emulationMode: "{{ .Values.emulationMode }}"
      emulatorId: "{{ index .Values.emulatorIds 1 }}"
    widebandInputBuffer:
      deviceId: "wideband_input_buffer_unimplemented"
      simulationMode: "{{ .Values.simulationMode }}"
      emulationMode: "{{ .Values.emulationMode }}"
      emulatorId: "{{ index .Values.emulatorIds 1 }}"
    widebandFrequencyShifter:
      deviceId: "wideband_frequency_shifter_unimplemented"
      simulationMode: "{{ .Values.simulationMode }}"
      emulationMode: "{{ .Values.emulationMode }}"
      emulatorId: "{{ index .Values.emulatorIds 1 }}"
    b123VccOsppfbChanneliser:
      deviceId: "receptor1_band123_vcc"
      simulationMode: "{{ .Values.simulationMode }}"
      emulationMode: "{{ .Values.emulationMode }}"
      emulatorId: "{{ index .Values.emulatorIds 1 }}"
    frequencySliceSelection:
      deviceId: "receptor1_fs_selector" # or receptor1_pss_fs_select
      simulationMode: "{{ .Values.simulationMode }}"
      emulationMode: "{{ .Values.emulationMode }}"
      emulatorId: "{{ index .Values.emulatorIds 1 }}"
    vccAllBands:
      deviceId: "vcc_all_bands_unimplemented"
      simulationMode: "0"
      emulationMode: "1"
  - name: fhs-vcc-3
    mac200:
      deviceId: "eth200g_2" # which number should this be
      simulationMode: "{{ .Values.simulationMode }}"
      emulationMode: "{{ .Values.emulationMode }}"
      emulatorId: "{{ index .Values.emulatorIds 2 }}"
    packetValidation:
      deviceId: "packet_validation_unimplemented"
      simulationMode: "{{ .Values.simulationMode }}"
      emulationMode: "{{ .Values.emulationMode }}"
      emulatorId: "{{ index .Values.emulatorIds 2 }}"
    widebandInputBuffer:
      deviceId: "wideband_input_buffer_unimplemented"
      simulationMode: "{{ .Values.simulationMode }}"
      emulationMode: "{{ .Values.emulationMode }}"
      emulatorId: "{{ index .Values.emulatorIds 2 }}"
    widebandFrequencyShifter:
      deviceId: "wideband_frequency_shifter_unimplemented"
      simulationMode: "{{ .Values.simulationMode }}"
      emulationMode: "{{ .Values.emulationMode }}"
      emulatorId: "{{ index .Values.emulatorIds 2 }}"
    b123VccOsppfbChanneliser:
      deviceId: "receptor2_band123_vcc"
      simulationMode: "{{ .Values.simulationMode }}"
      emulationMode: "{{ .Values.emulationMode }}"
      emulatorId: "{{ index .Values.emulatorIds 2 }}"
    frequencySliceSelection:
      deviceId: "receptor2_fs_selector" # or receptor2_pss_fs_select
      simulationMode: "{{ .Values.simulationMode }}"
      emulationMode: "{{ .Values.emulationMode }}"
      emulatorId: "{{ index .Values.emulatorIds 2 }}"
    vccAllBands:
      deviceId: "vcc_all_bands_unimplemented"
      simulationMode: "0"
      emulationMode: "1"

deviceServers:
  fhs-vcc-stack:
    enabled: true
    file: "data/fhs_vcc_stack.yaml"

nodeSelector: {}

affinity: {}

tolerations: []

hostInfo:
  environment: "minikube"
  hostIP: "127.0.0.1"
  externalPort: 10001
  clusterDomain: cluster.local
  fhsServerId: fhs01
  configLocation: "/app/mnt/lowLevelConfigMap"
  namespace: "ska-mid-cbf"

lowLevel:
  bitstreamEmulatorConfigPath: "emulators/config.json"
  emulatorBaseUrl: "ska-mid-cbf-emulators.svc.cluster.local:5001"
  firmwareRegistry: https://artefact.skao.int/repository/raw-internal
  firmwareImage: ska-mid-cbf-agilex-vcc
  bitstreamId: agilex-vcc
  bitstreamVersion: 0.0.6
  bitstreamPath: /app/mnt/bitstream
